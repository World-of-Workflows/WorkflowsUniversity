{"$id":"1","definitionId":"1782f495b7184d28979865e167e4a8e5","versionId":"c428ba93d12e4acd9e56c2a22555f7b4","name":"SampleMainNav","displayName":"Sample Main Navigation Page","version":1,"variables":{"$id":"2","data":{}},"customAttributes":{"$id":"3","data":{}},"isSingleton":false,"persistenceBehavior":"WorkflowBurst","deleteCompletedInstances":false,"isPublished":false,"isLatest":true,"createdAt":"2024-11-03T23:50:17.0668781Z","activities":[{"$id":"4","activityId":"83ac6482-a39e-41ec-894f-4cb59bce004c","type":"HttpEndpoint","displayName":"GET /home","x":64,"y":64,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"5","name":"Path","expressions":{"$id":"6","Literal":"/home"}},{"$id":"7","name":"Methods","expressions":{"$id":"8","Json":"[\"GET\"]"}},{"$id":"9","name":"ReadContent","expressions":{"$id":"10"}},{"$id":"11","name":"TargetType","expressions":{"$id":"12"}},{"$id":"13","name":"Schema","syntax":"Literal","expressions":{"$id":"14","Literal":""}},{"$id":"15","name":"Authorize","expressions":{"$id":"16"}},{"$id":"17","name":"Policy","expressions":{"$id":"18"}},{"$id":"19","name":"AuthorizeWithCustomHeader","expressions":{"$id":"20"}},{"$id":"21","name":"CustomHeaderName","expressions":{"$id":"22"}},{"$id":"23","name":"CustomHeaderValue","expressions":{"$id":"24"}}],"propertyStorageProviders":{"$id":"25"}},{"$id":"26","activityId":"bb6a7884-e534-4941-9058-c23c9ee49fbe","type":"ObjectInstanceList","name":"ListSettings","displayName":"List Settings","x":480,"y":80,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"27","name":"ObjectType","syntax":"Literal","expressions":{"$id":"28","Literal":"Settings"}},{"$id":"29","name":"Filter","expressions":{"$id":"30"}},{"$id":"31","name":"Skip","expressions":{"$id":"32"}},{"$id":"33","name":"Limit","expressions":{"$id":"34"}},{"$id":"35","name":"OrderBy","expressions":{"$id":"36"}}],"propertyStorageProviders":{"$id":"37"}},{"$id":"38","activityId":"5c075230-aaeb-44b1-ba29-597c5abcefa3","type":"RunJavaScript","displayName":"set up variables from settings","x":680,"y":240,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"39","name":"Script","syntax":"Literal","expressions":{"$id":"40","Literal":"// Define an array of key-value pairs\r\nconst keyVariableMappings = [\r\n    { variableName: \"PoweredBy\", key: \"PoweredByWoW\" },\r\n    { variableName: \"Logo\", key: \"Logo\" },\r\n    { variableName: \"LogoWhite\", key: \"LogoWhite\" },\r\n    { variableName: \"Style\", key: \"Style\" },\r\n    { variableName: \"authjs\", key: \"auth.js\" },\r\n    { variableName: \"StandardHeaderMatter\", key: \"StandardHeaderMatter\" }\r\n];\r\n\r\n// Function to get value by title from the JSON data\r\nfunction getValueByTitle(jsonData, key) {\r\n    for (let item of jsonData) {\r\n        if (item.Title === key) {\r\n            return item.Value;\r\n        }\r\n    }\r\n    return null; // Handle \"key not found\" as needed\r\n}\r\n\r\n// Loop through the array to set variables dynamically\r\nconst jsonData = activities.ListSettings.Output();\r\nkeyVariableMappings.forEach(mapping => {\r\n    setVariable(mapping.variableName, getValueByTitle(jsonData, mapping.key));\r\n});\r\n"}},{"$id":"41","name":"PossibleOutcomes","expressions":{"$id":"42"}}],"propertyStorageProviders":{"$id":"43"}},{"$id":"44","activityId":"ef8dcec2-c235-4e3d-a335-ff3e233438b6","type":"WriteHttpResponse","displayName":"HTTP Response","x":440,"y":460,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"45","name":"Content","syntax":"Liquid","expressions":{"$id":"46","Literal":"","Liquid":"\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title> Home Menu</title>\n    {{Variables.StandardHeaderMatter | raw }}    \n\n    <style>\n        body {\n\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            align-items: center;\n            height: 100vh;\n            margin: 0;\n        }\n        \n    </style>\n</head>\n<logoHeader class=\"bg-white-100 p-0 text-center mt-3 mb-8\">\n        {{Variables.Logo | raw }}\n</logoHeader>\n<body>\n    <style>{{Variables.Style | raw}}</style>\n    <nav>\n        <ul>\n            <li><a href=\"/clockin\"><i class=\"fas fa-clock\"></i> Staff Clockin System</a></li>\n            <li><a href=\"/secure\"><i class=\"fas fa-lock\"></i>Log in for Secure Menu</a></li>  \n        </ul>\n    </nav>\n</body>\n{{Variables.PoweredBy | raw}}\n</html>\n"}},{"$id":"47","name":"ContentType","expressions":{"$id":"48","Literal":"text/html"}},{"$id":"49","name":"StatusCode","expressions":{"$id":"50","Literal":"OK"}},{"$id":"51","name":"CharSet","expressions":{"$id":"52","Literal":"utf-8"}},{"$id":"53","name":"ResponseHeaders","expressions":{"$id":"54"}}],"propertyStorageProviders":{"$id":"55"}},{"$id":"56","activityId":"e2492c8d-7130-4a5a-9b7e-42b2a696b356","type":"RunWorkflow","displayName":"Clear up workflows","x":845,"y":558,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"57","name":"WorkflowDefinitionId","syntax":"JavaScript","expressions":{"$id":"58","JavaScript":"getWorkflowDefinitionIdByName(\"KillWorkflowInstancesByName\")"}},{"$id":"59","name":"Input","expressions":{"$id":"60","Literal":"MainNav"}},{"$id":"61","name":"PossibleOutcomes","expressions":{"$id":"62"}},{"$id":"63","name":"Mode","expressions":{"$id":"64","Literal":"DispatchAndForget"}},{"$id":"65","name":"TenantId","expressions":{"$id":"66"}},{"$id":"67","name":"CorrelationId","expressions":{"$id":"68"}},{"$id":"69","name":"ContextId","expressions":{"$id":"70"}},{"$id":"71","name":"CustomAttributes","expressions":{"$id":"72"}},{"$id":"73","name":"RetryFailedActivities","expressions":{"$id":"74"}}],"propertyStorageProviders":{"$id":"75"}}],"connections":[{"$id":"76","sourceActivityId":"83ac6482-a39e-41ec-894f-4cb59bce004c","targetActivityId":"bb6a7884-e534-4941-9058-c23c9ee49fbe","outcome":"Done"},{"$id":"77","sourceActivityId":"5c075230-aaeb-44b1-ba29-597c5abcefa3","targetActivityId":"ef8dcec2-c235-4e3d-a335-ff3e233438b6","outcome":"Done"},{"$id":"78","sourceActivityId":"bb6a7884-e534-4941-9058-c23c9ee49fbe","targetActivityId":"5c075230-aaeb-44b1-ba29-597c5abcefa3","outcome":"Done"},{"$id":"79","sourceActivityId":"ef8dcec2-c235-4e3d-a335-ff3e233438b6","targetActivityId":"e2492c8d-7130-4a5a-9b7e-42b2a696b356","outcome":"Done"}],"id":"c428ba93d12e4acd9e56c2a22555f7b4"}