{"$id":"1","definitionId":"1c963331d51849f4a90dd5f4842d5c6f","versionId":"05260d2547cd4bffb16b46fb623bff44","name":"DocumentWorkflow","displayName":"Document workflow with OpenAi","version":1,"variables":{"$id":"2","data":{}},"customAttributes":{"$id":"3","data":{}},"isSingleton":false,"persistenceBehavior":"WorkflowBurst","deleteCompletedInstances":false,"isPublished":false,"isLatest":true,"createdAt":"2024-07-26T04:32:23.4157545Z","activities":[{"$id":"4","activityId":"1e377f2b-70bb-43c9-988f-5ac295561458","type":"SetVariable","displayName":"Set ChatResponse","x":1720,"y":860,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"5","name":"VariableName","expressions":{"$id":"6","Literal":"ChatResponse"}},{"$id":"7","name":"Value","syntax":"JavaScript","expressions":{"$id":"8","JavaScript":"activities.GetResponse.Output()"}}],"propertyStorageProviders":{"$id":"9"}},{"$id":"10","activityId":"be73046d-b46f-4178-8358-872327bb6dd6","type":"SendHttpRequest","name":"requestWorkflowJSON","displayName":"Send HTTP Request requestWorkflowJSON","x":580,"y":600,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"11","name":"Url","syntax":"JavaScript","expressions":{"$id":"12","Literal":"https://localhost:7063/v1/workflow-definitions/d13a40ecbfbe45a2a83306f9f4b32b6e","JavaScript":"getVariable(\"WFDocumentorHost\")+'/v1/workflow-definitions/'+getVariable(\"WorkflowId\")"}},{"$id":"13","name":"Method","expressions":{"$id":"14","Literal":"GET"}},{"$id":"15","name":"Content","expressions":{"$id":"16"}},{"$id":"17","name":"ContentType","expressions":{"$id":"18","Literal":"application/json"}},{"$id":"19","name":"ReadContent","expressions":{"$id":"20","Literal":"true"}},{"$id":"21","name":"ResponseContentParserName","expressions":{"$id":"22","Literal":""}},{"$id":"23","name":"ResponseContentTargetType","expressions":{"$id":"24"}},{"$id":"25","name":"SupportedStatusCodes","expressions":{"$id":"26"}},{"$id":"27","name":"Authorization","expressions":{"$id":"28","Secret":"OAuth2:Focus WoW api credentials"}},{"$id":"29","name":"RequestHeaders","expressions":{"$id":"30"}}],"propertyStorageProviders":{"$id":"31"}},{"$id":"32","activityId":"b6d9495a-628a-4537-89a1-f8be3e1e6b1e","type":"SendHttpRequest","name":"requestWorkflowNames","displayName":"Send HTTP Request requestWorkflowNames","x":620,"y":240,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"33","name":"Url","syntax":"JavaScript","expressions":{"$id":"34","Literal":"https://yoursite.azurewebsites.net/v1/workflow-definitions","JavaScript":"getVariable(\"WFDocumentorHost\")+'/v1/workflow-definitions'"}},{"$id":"35","name":"Method","expressions":{"$id":"36","Literal":"GET"}},{"$id":"37","name":"Content","expressions":{"$id":"38"}},{"$id":"39","name":"ContentType","expressions":{"$id":"40","Literal":"application/json"}},{"$id":"41","name":"ReadContent","expressions":{"$id":"42","Literal":"true"}},{"$id":"43","name":"ResponseContentParserName","expressions":{"$id":"44","Literal":""}},{"$id":"45","name":"ResponseContentTargetType","expressions":{"$id":"46"}},{"$id":"47","name":"SupportedStatusCodes","expressions":{"$id":"48"}},{"$id":"49","name":"Authorization","expressions":{"$id":"50","Secret":"OAuth2:Focus WoW api credentials"}},{"$id":"51","name":"RequestHeaders","expressions":{"$id":"52"}}],"propertyStorageProviders":{"$id":"53"}},{"$id":"54","activityId":"56456f47-07cf-4d30-b47d-fdfdecf6beb7","type":"Correlate","displayName":"Correlate","x":340,"y":260,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"55","name":"Value","syntax":"JavaScript","expressions":{"$id":"56","Literal":"Getting the list of workflows","JavaScript":"'Getting the list of workflows - '+getVariable(\"Action\")"}}],"propertyStorageProviders":{"$id":"57"}},{"$id":"58","activityId":"06284dda-4d6b-41a2-9c0f-1cffb98c0cf4","type":"HttpEndpoint","name":"step2workflowID","displayName":"HTTP Endpoint /step2-workflowIDSingle","x":-680,"y":440,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"59","name":"Path","expressions":{"$id":"60","Literal":"/step2-workflowIDSingle"}},{"$id":"61","name":"Methods","expressions":{"$id":"62","Json":"[\"POST\"]"}},{"$id":"63","name":"ReadContent","expressions":{"$id":"64","Literal":"true"}},{"$id":"65","name":"TargetType","expressions":{"$id":"66"}},{"$id":"67","name":"Schema","syntax":"Literal","expressions":{"$id":"68","Literal":""}},{"$id":"69","name":"Authorize","expressions":{"$id":"70"}},{"$id":"71","name":"Policy","expressions":{"$id":"72"}},{"$id":"73","name":"AuthorizeWithCustomHeader","expressions":{"$id":"74"}},{"$id":"75","name":"CustomHeaderName","expressions":{"$id":"76"}},{"$id":"77","name":"CustomHeaderValue","expressions":{"$id":"78"}}],"propertyStorageProviders":{"$id":"79"}},{"$id":"80","activityId":"8106bfed-883d-4cd0-8be1-7ce23604b5ef","type":"SetVariable","displayName":"Set WorkflowJSON","x":1180,"y":620,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"81","name":"VariableName","expressions":{"$id":"82","Literal":"WorkflowJSON"}},{"$id":"83","name":"Value","syntax":"JavaScript","expressions":{"$id":"84","JavaScript":"activities.requestWorkflowJSON.ResponseContent()"}}],"propertyStorageProviders":{"$id":"85"}},{"$id":"86","activityId":"b69a2cc5-a564-468d-a57b-3305ca53d351","type":"ChatCompletions","name":"GetResponse","displayName":"Chat Completions Activity GetResponse","x":1180,"y":880,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"87","name":"Model","syntax":"JavaScript","expressions":{"$id":"88","Literal":"gpt-4","JavaScript":"'gpt-4o'"}},{"$id":"89","name":"MessageList","expressions":{"$id":"90"}},{"$id":"91","name":"SystemPrompt","syntax":"JavaScript","expressions":{"$id":"92","Literal":"You are a business analyst with World of Workflows.  you understand Elsa workflows.  You always produce output in markdown.  Do not include a mermaid diagram.  Do not include a conclusion paragraph.\n\nDo include: an Overview which describes what the workflow is designed to achieve.  Then include \n1: a detailed section for the sequence flow, \n2: a table of Workflow Activities showing displayName , properties.values and the purpose of any JavaScript\n3: a table of variables and how they are used, \n4: a table of javascript functions and what calls them.","JavaScript":"getVariable(\"WFDocumentorSystemPromptAnalysis\")"}},{"$id":"93","name":"UserPrompt","syntax":"JavaScript","expressions":{"$id":"94","JavaScript":"var prompt = 'describe this workflow.  '\r\nprompt += ' this is the workflow in JSON: '\r\nprompt += jsonEncode(getVariable(\"WorkflowJSON\"))\r\nreturn prompt"}},{"$id":"95","name":"FrequencyPenalty","expressions":{"$id":"96"}},{"$id":"97","name":"MaxTokens","expressions":{"$id":"98"}},{"$id":"99","name":"PresencePenalty","expressions":{"$id":"100"}},{"$id":"101","name":"Temperature","expressions":{"$id":"102"}},{"$id":"103","name":"TopP","expressions":{"$id":"104"}},{"$id":"105","name":"Authorization","expressions":{"$id":"106","Secret":"Authorization:ChapGPT Released"}},{"$id":"107","name":"BaseUrl","expressions":{"$id":"108","Literal":"https://api.openai.com/v1"}}],"propertyStorageProviders":{"$id":"109"}},{"$id":"110","activityId":"5d772cc9-9711-4da2-a3ea-dc2187cb87db","type":"Correlate","displayName":"Correlate","x":1680,"y":1100,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"111","name":"Value","syntax":"JavaScript","expressions":{"$id":"112","Literal":"Asking for workflow to analyse","JavaScript":"'ask ChatGPT for diagram of '+getVariable(\"WorkflowName\")"}}],"propertyStorageProviders":{"$id":"113"}},{"$id":"114","activityId":"fd4a1d95-faf1-4804-854f-77fda8d0e1a0","type":"SetVariable","displayName":"Set MermaidHTML","x":2440,"y":1500,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"115","name":"VariableName","expressions":{"$id":"116","Literal":"MermaidHTML"}},{"$id":"117","name":"Value","syntax":"JavaScript","expressions":{"$id":"118","Liquid":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Mermaid Diagram</title>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.1/mermaid.min.js\" \r\n        integrity=\"sha512-6a80OTZVmEJhqYJUmYd5z8yHUCDlYnj6q9XwB/gKOEyNQV/Q8u+XeSG59a2ZKFEHGTYzgfOQKYEBtrZV7vBr+Q==\" \r\n        crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script>\r\n</head>\r\n<body>\r\n    <div id=\"mermaid-container\"></div>\r\n\r\n    <script>// Assuming you have a variable ChatResponse containing Mermaid flowchart text\r\nconst ChatResponse = '{{Variables.ChatResponse |raw }}'\r\n\r\n// Initialize Mermaid\r\nmermaid.initialize({ startOnLoad: false });\r\n\r\n// Select the container where the diagram will be rendered\r\nconst container = document.getElementById('mermaid-container');\r\n\r\n// Render the Mermaid diagram\r\nmermaid.render('mermaid-diagram', ChatResponse, (svgCode) => {\r\n    container.innerHTML = svgCode;\r\n});\r\n\r\n    </script>\r\n</body>\r\n</html>\r\n","JavaScript":"`<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>` + getVariable(\"WorkflowName\") + ` Analysis</title>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css\" rel=\"stylesheet\">\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.1/mermaid.min.js\"></script>\r\n    <style>\r\n    `+getVariable(\"WFDocumentorStyle\")+`\r\n    </style>\r\n</head>\r\n<body class=\"bg-gray-100 text-gray-800 font-sans\">\r\n    <div class=\"container mx-auto p-6\">\r\n        <h1 class=\"text-3xl font-bold mb-4\">Workflow <b>` + getVariable(\"WorkflowName\") + `</b> Analysis</h1>\r\n        <h2 class=\"text-2xl font-semibold mb-2\">Workflow Diagram</h2>\r\n        <div class=\"bg-white p-4 rounded-lg shadow-md\">\r\n            <div class=\"mermaid\" id=\"mermaid-container\">\r\n                ` + getVariable(\"ChatResponseMermaid\") + `\r\n            </div>\r\n        </div>\r\n        <hr class=\"my-6 border-t-2 border-gray-300\">\r\n        <h2 class=\"text-2xl font-semibold mb-2\">Workflow Analysis</h2>\r\n        <div class=\"bg-white p-4 rounded-lg shadow-md\">\r\n            ` + activities.MakeHTML.Output() + `\r\n        </div>\r\n    </div>\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            mermaid.initialize({\r\n                startOnLoad: true\r\n            });\r\n            mermaid.contentLoaded();\r\n        });\r\n    </script>\r\n</body>\r\n</html>`"}}],"propertyStorageProviders":{"$id":"119"}},{"$id":"120","activityId":"31ec35cc-0f5c-4276-83f0-4693383d90c3","type":"WriteHttpResponse","displayName":"HTTP Response","x":2700,"y":1720,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"121","name":"Content","syntax":"JavaScript","expressions":{"$id":"122","Liquid":"","JavaScript":"getVariable(\"MermaidHTML\")"}},{"$id":"123","name":"ContentType","expressions":{"$id":"124","Literal":"text/html"}},{"$id":"125","name":"StatusCode","expressions":{"$id":"126","Literal":"OK"}},{"$id":"127","name":"CharSet","expressions":{"$id":"128","Literal":"utf-8"}},{"$id":"129","name":"ResponseHeaders","expressions":{"$id":"130"}}],"propertyStorageProviders":{"$id":"131"}},{"$id":"132","activityId":"c8bba6e5-db7e-44b2-97da-af68dab0ec9d","type":"SetVariable","displayName":"Set ChatResponseMermaid","x":2300,"y":1340,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"133","name":"VariableName","expressions":{"$id":"134","Literal":"ChatResponseMermaid"}},{"$id":"135","name":"Value","syntax":"JavaScript","expressions":{"$id":"136","JavaScript":"let r = '# Diagram for Workflow: '+getVariable(\"WorkflowName\")+'\\n'\r\nr += activities.GetResponseMermaid.Output().choices[0].message.content\r\nreturn removeCodeBlockDelimiters(r)\r\n\r\nfunction removeCodeBlockDelimiters(text) {\r\n    return text.replace(/```mermaid/g, '').replace(/```/g, '').trim();\r\n}"}}],"propertyStorageProviders":{"$id":"137"}},{"$id":"138","activityId":"d4c93f8b-cfc1-495d-ae50-b9b220458f05","type":"ChatCompletions","name":"GetResponseMermaid","displayName":"Chat Completions Activity GetResponseMermaid","x":1800,"y":1220,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"139","name":"Model","syntax":"JavaScript","expressions":{"$id":"140","Literal":"gpt-4","JavaScript":"'gpt-4o'"}},{"$id":"141","name":"MessageList","expressions":{"$id":"142"}},{"$id":"143","name":"SystemPrompt","syntax":"JavaScript","expressions":{"$id":"144","Literal":"","JavaScript":"getVariable(\"WFDocumentorSystemPromptMermaid\")"}},{"$id":"145","name":"UserPrompt","syntax":"JavaScript","expressions":{"$id":"146","JavaScript":"var prompt = 'Build a mermaid diagram for this workflow:'\r\nprompt += jsonEncode(getVariable(\"WorkflowJSON\"))\r\nreturn prompt"}},{"$id":"147","name":"FrequencyPenalty","expressions":{"$id":"148"}},{"$id":"149","name":"MaxTokens","expressions":{"$id":"150"}},{"$id":"151","name":"PresencePenalty","expressions":{"$id":"152"}},{"$id":"153","name":"Temperature","expressions":{"$id":"154"}},{"$id":"155","name":"TopP","expressions":{"$id":"156"}},{"$id":"157","name":"Authorization","syntax":"JavaScript","expressions":{"$id":"158","Secret":"Authorization:ChapGPT Released","JavaScript":"'Authorization:'+getVariable(\"WFDocumentorChatCredentialName\") "}},{"$id":"159","name":"BaseUrl","expressions":{"$id":"160","Literal":"https://api.openai.com/v1"}}],"propertyStorageProviders":{"$id":"161"}},{"$id":"162","activityId":"abc2e673-b323-44ad-97d1-812ffabbd3bb","type":"MarkdownToHtml","name":"MakeHTML","displayName":"Markdown To Html","x":1680,"y":980,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"163","name":"MarkdownString","syntax":"JavaScript","expressions":{"$id":"164","JavaScript":"getVariable(\"ChatResponse\").choices[0].message.content"}}],"propertyStorageProviders":{"$id":"165"}},{"$id":"166","activityId":"ca12c61b-dbae-4c4b-8d8e-75a5488e7871","type":"Correlate","displayName":"Correlate","x":1200,"y":760,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"167","name":"Value","syntax":"JavaScript","expressions":{"$id":"168","Literal":"Asking for workflow to analyse","JavaScript":"'gaskfor ChatGPT for analysis of '+getVariable(\"WorkflowName\")"}}],"propertyStorageProviders":{"$id":"169"}},{"$id":"170","activityId":"4822e0f9-c111-4b36-812b-6a24c3bf361b","type":"RunJavaScript","displayName":"set up variables from settings","x":780,"y":500,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"171","name":"Script","syntax":"Literal","expressions":{"$id":"172","Literal":"function getValueByTitle(jsonData, key) {\r\n   \r\n    for (let item of jsonData) {\r\n        if (item.Key === key) {\r\n            return item.Data1;\r\n        }\r\n    }\r\n\r\n    return null; // Or handle \"key not found\" as needed\r\n}\r\n\r\nsetVariable(\"WFDocumentorSystemPromptAnalysis\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorSystemPromptAnalysis\"));\r\nsetVariable(\"WFDocumentorSystemPromptMermaid\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorSystemPromptMermaid\"));\r\nsetVariable(\"WFDocumentorStyle\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorStyle\"));\r\nsetVariable(\"WFDocumentorOutputLocation\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorOutputLocation\"));\r\nsetVariable(\"WFDocumentorPreMermaidHeader\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorPreMermaidHeader\"));\r\nsetVariable(\"WFDocumentorHost\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorHost\"));\r\nsetVariable(\"WFDocumentorChatCredentialName\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorChatCredentialName\"));\r\n"}},{"$id":"173","name":"PossibleOutcomes","expressions":{"$id":"174"}}],"propertyStorageProviders":{"$id":"175"}},{"$id":"176","activityId":"69d4edfe-1407-4177-bd43-e19a76f27e5a","type":"ObjectInstanceList","name":"ListSettings","displayName":"List Settings","x":420,"y":480,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"177","name":"ObjectType","syntax":"Literal","expressions":{"$id":"178","Literal":"Settings"}},{"$id":"179","name":"Filter","expressions":{"$id":"180"}},{"$id":"181","name":"Skip","expressions":{"$id":"182"}},{"$id":"183","name":"Limit","expressions":{"$id":"184"}},{"$id":"185","name":"OrderBy","expressions":{"$id":"186"}},{"$id":"187","name":"Expand","expressions":{"$id":"188"}}],"propertyStorageProviders":{"$id":"189"}},{"$id":"190","activityId":"9daa4f8d-9f9d-4eea-919c-712d467796ac","type":"SetVariable","displayName":"Set WorkflowId","x":-40,"y":420,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"191","name":"VariableName","expressions":{"$id":"192","Literal":"WorkflowId"}},{"$id":"193","name":"Value","syntax":"JavaScript","expressions":{"$id":"194","JavaScript":"activities.step2workflowID.Output().Body.workflowId"}}],"propertyStorageProviders":{"$id":"195"}},{"$id":"196","activityId":"f3bffd6d-e15e-4d8a-8647-1a0f2eb47251","type":"SetVariable","displayName":"Set WorkflowNames","x":-700,"y":820,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"197","name":"VariableName","expressions":{"$id":"198","Literal":"WorkflowNames"}},{"$id":"199","name":"Value","syntax":"JavaScript","expressions":{"$id":"200","JavaScript":"activities.step2workflowIDMulti.Output().Body.workflowNames.split(',')"}}],"propertyStorageProviders":{"$id":"201"}},{"$id":"202","activityId":"0e550196-5288-4a72-9f76-70dc529474dd","type":"HttpEndpoint","name":"step2workflowIDMulti","displayName":"HTTP Endpoint /step2-workflowIDMulti","x":-1220,"y":760,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"203","name":"Path","expressions":{"$id":"204","Literal":"/step2-workflowIDMulti"}},{"$id":"205","name":"Methods","expressions":{"$id":"206","Json":"[\"POST\"]"}},{"$id":"207","name":"ReadContent","expressions":{"$id":"208","Literal":"true"}},{"$id":"209","name":"TargetType","expressions":{"$id":"210"}},{"$id":"211","name":"Schema","syntax":"Literal","expressions":{"$id":"212","Literal":""}},{"$id":"213","name":"Authorize","expressions":{"$id":"214"}},{"$id":"215","name":"Policy","expressions":{"$id":"216"}},{"$id":"217","name":"AuthorizeWithCustomHeader","expressions":{"$id":"218"}},{"$id":"219","name":"CustomHeaderName","expressions":{"$id":"220"}},{"$id":"221","name":"CustomHeaderValue","expressions":{"$id":"222"}}],"propertyStorageProviders":{"$id":"223"}},{"$id":"224","activityId":"53e6fe4b-b971-40e9-91ac-738a4c166d43","type":"SetVariable","displayName":"Set WorkflowIds","x":-680,"y":720,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"225","name":"VariableName","expressions":{"$id":"226","Literal":"WorkflowIds"}},{"$id":"227","name":"Value","syntax":"JavaScript","expressions":{"$id":"228","JavaScript":"activities.step2workflowIDMulti.Output().Body.workflowIds.split(',')"}}],"propertyStorageProviders":{"$id":"229"}},{"$id":"230","activityId":"aa77f203-8104-47a3-bf25-e8feefdfd789","type":"SetVariable","displayName":"Set WorkflowName","x":-60,"y":520,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"231","name":"VariableName","expressions":{"$id":"232","Literal":"WorkflowName"}},{"$id":"233","name":"Value","syntax":"JavaScript","expressions":{"$id":"234","JavaScript":"activities.step2workflowID.Output().Body.workflowName"}}],"propertyStorageProviders":{"$id":"235"}},{"$id":"236","activityId":"5ff4b4da-5a07-4dda-9c72-61b414e0f055","type":"HttpEndpoint","name":"httpStart","displayName":"HTTP Endpoint /documentWorkfow","x":-400,"y":20,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"237","name":"Path","expressions":{"$id":"238","Literal":"/documentWorkfow"}},{"$id":"239","name":"Methods","expressions":{"$id":"240","Json":"[\"GET\"]"}},{"$id":"241","name":"ReadContent","expressions":{"$id":"242","Literal":"true"}},{"$id":"243","name":"TargetType","expressions":{"$id":"244"}},{"$id":"245","name":"Schema","syntax":"Literal","expressions":{"$id":"246","Literal":""}},{"$id":"247","name":"Authorize","expressions":{"$id":"248"}},{"$id":"249","name":"Policy","expressions":{"$id":"250"}},{"$id":"251","name":"AuthorizeWithCustomHeader","expressions":{"$id":"252"}},{"$id":"253","name":"CustomHeaderName","expressions":{"$id":"254"}},{"$id":"255","name":"CustomHeaderValue","expressions":{"$id":"256"}}],"propertyStorageProviders":{"$id":"257"}},{"$id":"258","activityId":"31e3ada8-bde9-486e-b907-58916a61bcb4","type":"If","displayName":"If no action","x":1580,"y":440,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"259","name":"Condition","syntax":"JavaScript","expressions":{"$id":"260","JavaScript":"isNullOrEmpty(getVariable(\"Action\"))"}}],"propertyStorageProviders":{"$id":"261"}},{"$id":"262","activityId":"1c7a0faf-e314-496a-8dc7-74d28663e3b8","type":"WriteHttpResponse","displayName":"HTTP Response - select single workflow","x":1920,"y":280,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"263","name":"Content","syntax":"Liquid","expressions":{"$id":"264","Liquid":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Workflow Documentator</title>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css\" rel=\"stylesheet\">\r\n</head>\r\n<body class=\"bg-gray-100 flex items-center justify-center min-h-screen\">\r\n    <div class=\"bg-white p-8 rounded shadow-md w-180\">\r\n        <h1 class=\"text-2xl font-bold mb-4\">Select a Workflow</h1>\r\n        <form id=\"workflow-form\" action=\"/step2-workflowIDsingle\" method=\"POST\">\r\n            <select id=\"workflow-dropdown\" class=\"block w-full mt-1 bg-gray-100 border border-gray-300 rounded p-2\" onchange=\"handleDropdownChange()\">\r\n                <option value=\"\">-- Select Workflow --</option>\r\n            </select>\r\n            <input type=\"hidden\" id=\"selected-workflow-id\" name=\"workflowId\">\r\n            <input type=\"hidden\" id=\"selected-workflow-name\" name=\"workflowName\">\r\n            <input type=\"hidden\" id=\"selected-workflow-status\" name=\"workflowStatus\">\r\n            <div id=\"status-container\" class=\"mt-4 hidden\">\r\n                <input type=\"text\" id=\"status\" name=\"status\" class=\"block w-full mt-1 bg-gray-100 border border-gray-300 rounded p-2\" readonly>\r\n            </div>\r\n        </form>\r\n   </div>\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function () {\r\n            const data = {{Variables.Workflows | json | raw }};\r\n            const dropdown = document.getElementById('workflow-dropdown');\r\n\r\n            data.items.forEach(item => {\r\n                const option = document.createElement('option');\r\n                option.value = item.id;\r\n                option.textContent = item.displayName;\r\n                dropdown.appendChild(option);\r\n            });\r\n        });\r\n\r\n        function handleDropdownChange() {\r\n            const dropdown = document.getElementById('workflow-dropdown');\r\n            const selectedValue = dropdown.value;\r\n            const selectedText = dropdown.selectedOptions[0].text;\r\n            const selectedStatus = 'Sending '+selectedText + ' for analsysis...  Please be patient'\r\n\r\n            const hiddenInput = document.getElementById('selected-workflow-id');\r\n            const hiddenNameInput = document.getElementById('selected-workflow-name');\r\n            const hiddenStatusInput = document.getElementById('selected-workflow-status');\r\n\r\n            hiddenInput.value = selectedValue;\r\n            hiddenNameInput.value = selectedText;\r\n            hiddenStatusInput.value = selectedStatus;\r\n\r\n            const statusContainer = document.getElementById('status-container');\r\n            const statusInput = document.getElementById('status');\r\n            if (selectedValue) {\r\n                statusInput.value = selectedStatus;\r\n                statusContainer.classList.remove('hidden');\r\n            } else {\r\n                statusInput.value = '';\r\n                statusContainer.classList.add('hidden');\r\n            }\r\n\r\n            const form = document.getElementById('workflow-form');\r\n            dropdown.readonly = true\r\n            \r\n            console.log(dropdown)\r\n            form.submit();\r\n            console.log(dropdown)\r\n            \r\n        }\r\n    </script>\r\n</body>\r\n</html>\r\n"}},{"$id":"265","name":"ContentType","expressions":{"$id":"266","Literal":"text/html"}},{"$id":"267","name":"StatusCode","expressions":{"$id":"268","Literal":"OK"}},{"$id":"269","name":"CharSet","expressions":{"$id":"270","Literal":"utf-8"}},{"$id":"271","name":"ResponseHeaders","expressions":{"$id":"272"}}],"propertyStorageProviders":{"$id":"273"}},{"$id":"274","activityId":"5cfc9801-697c-4caa-b424-d254eec781a6","type":"ForEach","name":"foreachWorkflow","displayName":"For Each workflow","x":-360,"y":880,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"275","name":"Items","syntax":"JavaScript","expressions":{"$id":"276","JavaScript":"getVariable(\"WorkflowIds\")"}}],"propertyStorageProviders":{"$id":"277"}},{"$id":"278","activityId":"a479c1de-2743-4a09-bb46-3d1615235054","type":"SetVariable","displayName":"Set WorkflowId","x":40,"y":840,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"279","name":"VariableName","expressions":{"$id":"280","Literal":"WorkflowId"}},{"$id":"281","name":"Value","syntax":"JavaScript","expressions":{"$id":"282","JavaScript":"activities.foreachWorkflow.Output()"}}],"propertyStorageProviders":{"$id":"283"}},{"$id":"284","activityId":"0a083b46-c7fb-4303-a4dc-11d40482f33a","type":"SetVariable","displayName":"Set WorkflowName","x":180,"y":960,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"285","name":"VariableName","expressions":{"$id":"286","Literal":"WorkflowName"}},{"$id":"287","name":"Value","syntax":"JavaScript","expressions":{"$id":"288","JavaScript":"function findCorrespondingName(workflowId) {\n            const idArray = getVariable(\"WorkflowIds\")\n            const nameArray = getVariable(\"WorkflowNames\")\n            const index = idArray.indexOf(workflowId);\n            if (index !== -1) {\n                return nameArray[index];\n            } else {\n                return 'Workflow ID not found';\n            }\n        }\n\nconst workflowId = getVariable(\"WorkflowId\")\nreturn findCorrespondingName(workflowId);"}}],"propertyStorageProviders":{"$id":"289"}},{"$id":"290","activityId":"db3eb830-6cfd-4f65-a185-605a2622bef3","type":"Base64ToByteArray","name":"base64ToBtyeArray1","displayName":"Base64 to Byte Array - ChatResponse","x":2400,"y":780,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"291","name":"Base64String","syntax":"JavaScript","expressions":{"$id":"292","JavaScript":"base64Encode('# Analysis for Workflow: '+getVariable(\"WorkflowName\")+'\\n'+getVariable(\"ChatResponse\").choices[0].message.content)"}}],"propertyStorageProviders":{"$id":"293"}},{"$id":"294","activityId":"e1e990bd-001d-47b2-9c4d-bb241be4a000","type":"Base64ToByteArray","name":"base64ToBtyeArrayMermaid","displayName":"Base64 to Byte Array - ChatResponseMermaid","x":3140,"y":1300,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"295","name":"Base64String","syntax":"JavaScript","expressions":{"$id":"296","JavaScript":"let s = getVariable(\"WFDocumentorPreMermaidHeader\")\ns += activities.GetResponseMermaid.Output().choices[0].message.content\n\nbase64Encode(s)"}}],"propertyStorageProviders":{"$id":"297"}},{"$id":"298","activityId":"000265f3-061d-4ed4-98f4-1f3ce7bba8e2","type":"OutFile","displayName":"Out File - /data/docs/workflowname.md","x":2920,"y":940,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"299","name":"Bytes","syntax":"JavaScript","expressions":{"$id":"300","JavaScript":"activities.base64ToBtyeArray1.Output()"}},{"$id":"301","name":"Path","syntax":"JavaScript","expressions":{"$id":"302","JavaScript":"getVariable(\"WFDocumentorOutputLocation\")+'/'+getVariable(\"WorkflowName\").replace(/\\//g, '_')+\".md\""}},{"$id":"303","name":"Mode","expressions":{"$id":"304","Literal":"Overwrite"}}],"propertyStorageProviders":{"$id":"305"}},{"$id":"306","activityId":"3943e395-0499-4a8b-889a-633ce4190579","type":"OutFile","displayName":"Out File - /data/docs/workflowname_Diagram.md","x":3760,"y":1320,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"307","name":"Bytes","syntax":"JavaScript","expressions":{"$id":"308","JavaScript":"activities.base64ToBtyeArrayMermaid.Output()"}},{"$id":"309","name":"Path","syntax":"JavaScript","expressions":{"$id":"310","JavaScript":"getVariable(\"WFDocumentorOutputLocation\")+'/'+getVariable(\"WorkflowName\").replace(/\\//g, '_')+\"_Diagram.md\""}},{"$id":"311","name":"Mode","expressions":{"$id":"312","Literal":"Overwrite"}}],"propertyStorageProviders":{"$id":"313"}},{"$id":"314","activityId":"a17d4a91-f658-46c9-a5e7-24eab1b54f95","type":"If","displayName":"if Action == multi or sequential","x":2740,"y":1280,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"315","name":"Condition","syntax":"JavaScript","expressions":{"$id":"316","JavaScript":"getVariable(\"Action\")== 'multi' || getVariable(\"Action\")== 'sequential'"}}],"propertyStorageProviders":{"$id":"317"}},{"$id":"318","activityId":"22d10739-23ab-4dc1-b520-be02d425f0e2","type":"EnumerateFiles","name":"ListFiles","displayName":"Enumerate Files","x":-20,"y":1100,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"319","name":"Path","expressions":{"$id":"320","Literal":"/data/docs"}},{"$id":"321","name":"Pattern","expressions":{"$id":"322","Literal":"*.md"}},{"$id":"323","name":"IgnoreInaccessible","expressions":{"$id":"324"}},{"$id":"325","name":"MatchCasing","expressions":{"$id":"326","Literal":"CaseInsensitive"}},{"$id":"327","name":"SubDirectories","expressions":{"$id":"328"}}],"propertyStorageProviders":{"$id":"329"}},{"$id":"330","activityId":"b20adcfd-a72f-49df-9269-9f5a11f11978","type":"ForEach","name":"foreachfile","displayName":"For Each file","x":340,"y":1120,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"331","name":"Items","syntax":"JavaScript","expressions":{"$id":"332","JavaScript":"activities.ListFiles.Files()"}}],"propertyStorageProviders":{"$id":"333"}},{"$id":"334","activityId":"519506f6-fa79-4e85-8f3d-d01fda1c18f4","type":"ReadFile","name":"readFile","displayName":"Read File","x":940,"y":1140,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"335","name":"Path","syntax":"JavaScript","expressions":{"$id":"336","JavaScript":"activities.foreachfile.Output()"}}],"propertyStorageProviders":{"$id":"337"}},{"$id":"338","activityId":"3fa4a422-3968-49d6-871a-28688ca98000","type":"WriteLine","displayName":"Write Line","x":660,"y":1100,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"339","name":"Text","syntax":"JavaScript","expressions":{"$id":"340","JavaScript":"activities.foreachfile.Output()"}}],"propertyStorageProviders":{"$id":"341"}},{"$id":"342","activityId":"676ce85b-f806-4caf-8c87-13574bc7e203","type":"ByteArrayToBase64","name":"base64Converter","displayName":"Byte Array to Base64","x":1180,"y":1180,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"343","name":"bytes","syntax":"JavaScript","expressions":{"$id":"344","JavaScript":"activities.readFile.Bytes()"}}],"propertyStorageProviders":{"$id":"345"}},{"$id":"346","activityId":"b11cab73-f73c-4cd6-852b-7b4373b4ba56","type":"SetVariable","displayName":"Set FilesList","x":0,"y":1220,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"347","name":"VariableName","expressions":{"$id":"348","Literal":"FilesArray"}},{"$id":"349","name":"Value","syntax":"JavaScript","expressions":{"$id":"350","JavaScript":"[]"}}],"propertyStorageProviders":{"$id":"351"}},{"$id":"352","activityId":"54e8fbce-7eb6-449e-8fea-75afeeee07b7","type":"RunJavaScript","displayName":"Run JavaScript","x":860,"y":1300,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"353","name":"Script","syntax":"Literal","expressions":{"$id":"354","Literal":"const base64Content = activities.base64Converter.Output()\nconst filename = activities.foreachfile.Output().replace(/ /g, '_')\n\nlet filesArray = getVariable(\"FilesArray\")\n\n    // Push the new file content and filename to the FilesArray\nfilesArray.push({ content: base64Content, filename: filename });    \n\nsetVariable(\"FilesArray\",filesArray)\n"}},{"$id":"355","name":"PossibleOutcomes","expressions":{"$id":"356"}}],"propertyStorageProviders":{"$id":"357"}},{"$id":"358","activityId":"844942cd-23ec-4d55-98f2-40972ac88a2f","type":"WriteHttpResponse","displayName":"HTTP Response - select multiple workflows sequentially","x":1920,"y":480,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"359","name":"Content","syntax":"Liquid","expressions":{"$id":"360","Liquid":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Workflow Documentator</title>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css\" rel=\"stylesheet\">\r\n</head>\r\n<body class=\"bg-gray-100 flex items-center justify-center min-h-screen\">\r\n    <div class=\"bg-white p-8 rounded shadow-md w-380\">\r\n        <h1 class=\"text-2xl font-bold mb-4\">Select Workflows for Analysis</h1>\r\n        <form id=\"workflow-form\" action=\"/step2-workflowIDMulti\" method=\"POST\">\r\n            <div class=\"mb-4\">\r\n                <input type=\"checkbox\" id=\"check-all\" class=\"mr-2\">\r\n                <label for=\"check-all\">Check/Uncheck All</label>\r\n            </div>\r\n            <div id=\"workflow-list\" class=\"mb-4\">\r\n                <!-- Workflows will be dynamically added here -->\r\n            </div>\r\n            <input type=\"hidden\" id=\"selected-workflow-ids\" name=\"workflowIds\">\r\n            <input type=\"hidden\" id=\"selected-workflow-names\" name=\"workflowNames\">\r\n            <input type=\"hidden\" id=\"selected-workflow-statuses\" name=\"workflowStatuses\">\r\n            <div id=\"status-container\" class=\"mt-4 hidden\">\r\n                <input type=\"text\" id=\"status\" name=\"status\" class=\"block w-full mt-1 bg-gray-100 border border-gray-300 rounded p-2\" readonly>\r\n            </div>\r\n            <button type=\"button\" onclick=\"submitForm()\" class=\"bg-blue-500 text-white p-2 rounded mt-4\">Submit for Analysis</button>\r\n            <div id=\"status-message\" class=\"text-lg\"></div>\r\n        </form>\r\n    </div>\r\n    <script>\r\n        const statusMessage = document.getElementById('status-message');\r\n        const downloadedFilenames = [];\r\n\r\n        document.addEventListener('DOMContentLoaded', function () {\r\n            const data = {{Variables.Workflows | json | raw }};\r\n            const listContainer = document.getElementById('workflow-list');\r\n\r\n            data.items.forEach(item => {\r\n                const div = document.createElement('div');\r\n                div.className = 'flex items-center mb-2';\r\n\r\n                const checkbox = document.createElement('input');\r\n                checkbox.type = 'checkbox';\r\n                checkbox.value = item.id;\r\n                checkbox.className = 'mr-2';\r\n                checkbox.dataset.name = item.displayName;\r\n\r\n                const label = document.createElement('label');\r\n                label.textContent = item.displayName;\r\n\r\n                div.appendChild(checkbox);\r\n                div.appendChild(label);\r\n                listContainer.appendChild(div);\r\n            });\r\n\r\n            document.getElementById('check-all').addEventListener('change', function () {\r\n                const checkboxes = document.querySelectorAll('#workflow-list input[type=\"checkbox\"]');\r\n                checkboxes.forEach(checkbox => {\r\n                    checkbox.checked = this.checked;\r\n                });\r\n            });\r\n        });\r\n\r\n        function submitForm() {\r\n            const checkboxes = document.querySelectorAll('#workflow-list input[type=\"checkbox\"]');\r\n            const selectedIds = [];\r\n            const selectedNames = [];\r\n            const selectedStatuses = [];\r\n            const workflows = [];\r\n\r\n            checkboxes.forEach(checkbox => {\r\n                if (checkbox.checked) {\r\n                    selectedIds.push(checkbox.value);\r\n                    selectedNames.push(checkbox.dataset.name);\r\n                    workflows.push({id: checkbox.value, name: checkbox.dataset.name});\r\n                    selectedStatuses.push('Sending ' + checkbox.dataset.name + ' for analysis... Please be patient');\r\n                }\r\n            });\r\n\r\n            document.getElementById('selected-workflow-ids').value = selectedIds.join(',');\r\n            document.getElementById('selected-workflow-names').value = selectedNames.join(',');\r\n            document.getElementById('selected-workflow-statuses').value = selectedStatuses.join(',');\r\n\r\n            const statusContainer = document.getElementById('status-container');\r\n            const statusInput = document.getElementById('status');\r\n            if (selectedStatuses.length > 0) {\r\n                statusInput.value = selectedStatuses.join(' | ');\r\n                statusContainer.classList.remove('hidden');\r\n            } else {\r\n                statusInput.value = '';\r\n                statusContainer.classList.add('hidden');\r\n            }\r\n\r\n            processWorkflows(workflows);\r\n        }\r\n\r\n        // Function to send request for a single workflow and get filenames\r\n        function getFilenamesForWorkflow(workflow) {\r\n            return fetch('/step2-workflowIDSingle', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ workflowId: workflow.id, workflowName: workflow.name, action: 'sequential' })\r\n            })\r\n            .then(response => response.json());\r\n        }\r\n\r\n        // Function to handle the sequential requests\r\n        async function processWorkflows(workflows) {\r\n            for (const workflow of workflows) {\r\n                statusMessage.textContent = `Processing ${workflow.name}...`;\r\n                try {\r\n                    const response = await getFilenamesForWorkflow(workflow);\r\n                    console.log('Received response for workflow', workflow.id, response);\r\n                } catch (error) {\r\n                    console.error('Error fetching filenames for workflow:', workflow, error);\r\n                    statusMessage.textContent = `Error processing ${workflow.name}. Check console for details.`;\r\n                    return;\r\n                }\r\n            }\r\n\r\n            statusMessage.textContent = 'All workflows processed. Preparing to download files...';\r\n            // Trigger the final download request after processing all workflows\r\n            triggerFinalDownload();\r\n        }\r\n\r\n        // Function to trigger the final download of all files\r\n        async function triggerFinalDownload() {\r\n            try {\r\n                const response = await fetch('/api/getAllDocFiles', { method: 'GET' });\r\n                const files = await response.json();\r\n                statusMessage.textContent = 'Downloading files...';\r\n\r\n                for (const file of files) {\r\n                    await downloadFile(file);\r\n                    downloadedFilenames.push(file.filename.replace(/[\\s\\\\/]/g, '_'));\r\n                }\r\n\r\n                downloadFileList();\r\n                statusMessage.textContent = 'All files downloaded, including mdFiles.txt.';\r\n            } catch (error) {\r\n                console.error('Error triggering final download:', error);\r\n                statusMessage.textContent = 'Error triggering file download. Check console for details.';\r\n            }\r\n        }\r\n\r\n        // Function to download a single file with a delay\r\n        function downloadFile(file) {\r\n            return new Promise(resolve => {\r\n                const blob = new Blob([Uint8Array.from(atob(file.content), c => c.charCodeAt(0))], { type: 'application/octet-stream' });\r\n                const link = document.createElement('a');\r\n                link.href = URL.createObjectURL(blob);\r\n                link.download = file.filename;\r\n\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n                setTimeout(resolve, 100); // Introduce a 100ms delay between downloads\r\n            });\r\n        }\r\n\r\n        // Function to create and download the mdFiles.txt containing all downloaded filenames\r\n        function downloadFileList() {\r\n            const fileListContent = downloadedFilenames.join('\\n');\r\n            const blob = new Blob([fileListContent], { type: 'text/plain' });\r\n            const link = document.createElement('a');\r\n            link.href = URL.createObjectURL(blob);\r\n            link.download = 'mdFiles.txt';\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n            console.log('mdFiles.txt downloaded:', fileListContent);\r\n        }\r\n    </script>\r\n</body>\r\n</html>\r\n"}},{"$id":"361","name":"ContentType","expressions":{"$id":"362","Literal":"text/html"}},{"$id":"363","name":"StatusCode","expressions":{"$id":"364","Literal":"OK"}},{"$id":"365","name":"CharSet","expressions":{"$id":"366","Literal":"utf-8"}},{"$id":"367","name":"ResponseHeaders","expressions":{"$id":"368"}}],"propertyStorageProviders":{"$id":"369"}},{"$id":"370","activityId":"12806bbc-d7d2-41e5-b474-fbb477904506","type":"WriteHttpResponse","displayName":"HTTP Response - select multiple workflows","x":2500,"y":360,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"371","name":"Content","syntax":"Liquid","expressions":{"$id":"372","Liquid":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Workflow Documentator</title>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css\" rel=\"stylesheet\">\r\n</head>\r\n<body class=\"bg-gray-100 flex items-center justify-center min-h-screen\">\r\n    <div class=\"bg-white p-8 rounded shadow-md w-180\">\r\n        <h1 class=\"text-2xl font-bold mb-4\">Select Workflows for Analysis</h1>\r\n        <form id=\"workflow-form\" action=\"/step2-workflowIDMulti\" method=\"POST\">\r\n            <div id=\"workflow-list\" class=\"mb-4\">\r\n                <!-- Workflows will be dynamically added here -->\r\n            </div>\r\n            <input type=\"hidden\" id=\"selected-workflow-ids\" name=\"workflowIds\">\r\n            <input type=\"hidden\" id=\"selected-workflow-names\" name=\"workflowNames\">\r\n            <input type=\"hidden\" id=\"selected-workflow-statuses\" name=\"workflowStatuses\">\r\n            <div id=\"status-container\" class=\"mt-4 hidden\">\r\n                <input type=\"text\" id=\"status\" name=\"status\" class=\"block w-full mt-1 bg-gray-100 border border-gray-300 rounded p-2\" readonly>\r\n            </div>\r\n            <button type=\"button\" onclick=\"submitForm()\" class=\"bg-blue-500 text-white p-2 rounded mt-4\">Submit for Analysis</button>\r\n        </form>\r\n    </div>\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function () {\r\n            const data = {{Variables.Workflows | json | raw }};\r\n            const listContainer = document.getElementById('workflow-list');\r\n\r\n            data.items.forEach(item => {\r\n                const div = document.createElement('div');\r\n                div.className = 'flex items-center mb-2';\r\n\r\n                const checkbox = document.createElement('input');\r\n                checkbox.type = 'checkbox';\r\n                checkbox.value = item.id;\r\n                checkbox.className = 'mr-2';\r\n                checkbox.dataset.name = item.displayName;\r\n\r\n                const label = document.createElement('label');\r\n                label.textContent = item.displayName;\r\n\r\n                div.appendChild(checkbox);\r\n                div.appendChild(label);\r\n                listContainer.appendChild(div);\r\n            });\r\n        });\r\n\r\n        function submitForm() {\r\n            const checkboxes = document.querySelectorAll('#workflow-list input[type=\"checkbox\"]');\r\n            const selectedIds = [];\r\n            const selectedNames = [];\r\n            const selectedStatuses = [];\r\n\r\n            checkboxes.forEach(checkbox => {\r\n                if (checkbox.checked) {\r\n                    selectedIds.push(checkbox.value);\r\n                    selectedNames.push(checkbox.dataset.name);\r\n                    selectedStatuses.push('Sending ' + checkbox.dataset.name + ' for analysis... Please be patient');\r\n                }\r\n            });\r\n\r\n            document.getElementById('selected-workflow-ids').value = selectedIds.join(',');\r\n            document.getElementById('selected-workflow-names').value = selectedNames.join(',');\r\n            document.getElementById('selected-workflow-statuses').value = selectedStatuses.join(',');\r\n\r\n            const statusContainer = document.getElementById('status-container');\r\n            const statusInput = document.getElementById('status');\r\n            if (selectedStatuses.length > 0) {\r\n                statusInput.value = selectedStatuses.join(' | ');\r\n                statusContainer.classList.remove('hidden');\r\n            } else {\r\n                statusInput.value = '';\r\n                statusContainer.classList.add('hidden');\r\n            }\r\n\r\n            document.getElementById('workflow-form').submit();\r\n        }\r\n    </script>\r\n</body>\r\n</html>"}},{"$id":"373","name":"ContentType","expressions":{"$id":"374","Literal":"text/html"}},{"$id":"375","name":"StatusCode","expressions":{"$id":"376","Literal":"OK"}},{"$id":"377","name":"CharSet","expressions":{"$id":"378","Literal":"utf-8"}},{"$id":"379","name":"ResponseHeaders","expressions":{"$id":"380"}}],"propertyStorageProviders":{"$id":"381"}},{"$id":"382","activityId":"2b31cbd5-2e27-489b-b118-69a653abbcc9","type":"SetVariable","displayName":"Set Action = multi","x":-660,"y":940,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"383","name":"VariableName","expressions":{"$id":"384","Literal":"Action"}},{"$id":"385","name":"Value","syntax":"JavaScript","expressions":{"$id":"386","JavaScript":"'multi'"}}],"propertyStorageProviders":{"$id":"387"}},{"$id":"388","activityId":"2b38e2ca-3a2e-42f0-ac21-dcd87fd8b669","type":"SetVariable","displayName":"Set Action = multi","x":-80,"y":640,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"389","name":"VariableName","expressions":{"$id":"390","Literal":"Action"}},{"$id":"391","name":"Value","syntax":"JavaScript","expressions":{"$id":"392","JavaScript":"activities.step2workflowID.Output().Body.action ?? ''"}}],"propertyStorageProviders":{"$id":"393"}},{"$id":"394","activityId":"b7a53ec0-e39e-4023-84d6-f770c2edf53c","type":"If","displayName":"if Action == multi or sequential","x":2000,"y":760,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"395","name":"Condition","syntax":"JavaScript","expressions":{"$id":"396","JavaScript":"getVariable(\"Action\")== 'multi' || getVariable(\"Action\")== 'sequential'"}}],"propertyStorageProviders":{"$id":"397"}},{"$id":"398","activityId":"c15a80ad-2467-443c-be25-c38cbfd8b84a","type":"WriteHttpResponse","displayName":"HTTP Response","x":1180,"y":1340,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"399","name":"Content","syntax":"JavaScript","expressions":{"$id":"400","JavaScript":"`<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Download File</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css\" rel=\"stylesheet\">\n</head>\n<body class=\"bg-gray-100 text-gray-900\">\n\n<div class=\"container mx-auto p-4\">\n    <h1 class=\"text-2xl font-bold mb-4\">Downloading File...</h1>\n</div>\n\n<script>\n    // Replace with the actual base64 encoded content and filename\n    const base64Content = '`+activities.base64Converter.Output()+`';\n    const filename = '`+activities.foreachfile.Output()+`';\n\n    // Create a Blob from the base64 content\n    const blob = new Blob([Uint8Array.from(atob(base64Content), c => c.charCodeAt(0))], { type: 'application/octet-stream' });\n\n    // Create a download link and trigger the download\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = filename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n</script>\n\n</body>\n</html>\n\n`"}},{"$id":"401","name":"ContentType","expressions":{"$id":"402","Literal":"text/html"}},{"$id":"403","name":"StatusCode","expressions":{"$id":"404","Literal":"OK"}},{"$id":"405","name":"CharSet","expressions":{"$id":"406","Literal":"utf-8"}},{"$id":"407","name":"ResponseHeaders","expressions":{"$id":"408"}}],"propertyStorageProviders":{"$id":"409"}},{"$id":"410","activityId":"77ab6068-8b51-43a7-914e-6bb1567ec35a","type":"If","displayName":"if Action == sequential","x":3500,"y":940,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"411","name":"Condition","syntax":"JavaScript","expressions":{"$id":"412","JavaScript":"getVariable(\"Action\")== 'sequential'"}}],"propertyStorageProviders":{"$id":"413"}},{"$id":"414","activityId":"ee179ec8-b05e-40d0-b1ec-03094494fb65","type":"WriteHttpResponse","displayName":"HTTP Response","x":4740,"y":1180,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"415","name":"Content","syntax":"JavaScript","expressions":{"$id":"416","JavaScript":"return {\"status\":\"analysis doc and mermaid diagram created for \"+getVariable(\"WorkflowName\")}"}},{"$id":"417","name":"ContentType","expressions":{"$id":"418","Literal":"application/json"}},{"$id":"419","name":"StatusCode","expressions":{"$id":"420","Literal":"OK"}},{"$id":"421","name":"CharSet","expressions":{"$id":"422","Literal":"utf-8"}},{"$id":"423","name":"ResponseHeaders","expressions":{"$id":"424"}}],"propertyStorageProviders":{"$id":"425"}},{"$id":"426","activityId":"a0bad298-4fa7-41ea-abfc-0263d27e5250","type":"If","displayName":"if Action == sequential","x":4300,"y":1220,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"427","name":"Condition","syntax":"JavaScript","expressions":{"$id":"428","JavaScript":"getVariable(\"Action\")== 'sequential'"}}],"propertyStorageProviders":{"$id":"429"}},{"$id":"430","activityId":"b1d9097a-a348-41f1-be0e-993c9cd6121e","type":"Correlate","displayName":"Correlate","x":260,"y":680,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"431","name":"Value","syntax":"JavaScript","expressions":{"$id":"432","Literal":"Asking for workflow to analyse","JavaScript":"'getting the JSON for '+getVariable(\"WorkflowName\")"}}],"propertyStorageProviders":{"$id":"433"}},{"$id":"434","activityId":"c06a8d83-9f57-4e45-9b85-575b92101b2b","type":"HttpEndpoint","name":"httpgetDocFiles","displayName":"HTTP Endpoint /api/getAllDocFiles","x":-760,"y":1160,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"435","name":"Path","expressions":{"$id":"436","Literal":"/api/getAllDocFiles"}},{"$id":"437","name":"Methods","expressions":{"$id":"438","Json":"[\"GET\"]"}},{"$id":"439","name":"ReadContent","expressions":{"$id":"440"}},{"$id":"441","name":"TargetType","expressions":{"$id":"442"}},{"$id":"443","name":"Schema","syntax":"Literal","expressions":{"$id":"444","Literal":""}},{"$id":"445","name":"Authorize","expressions":{"$id":"446"}},{"$id":"447","name":"Policy","expressions":{"$id":"448"}},{"$id":"449","name":"AuthorizeWithCustomHeader","expressions":{"$id":"450"}},{"$id":"451","name":"CustomHeaderName","expressions":{"$id":"452"}},{"$id":"453","name":"CustomHeaderValue","expressions":{"$id":"454"}}],"propertyStorageProviders":{"$id":"455"}},{"$id":"456","activityId":"6f315c7f-8c42-4b96-a9cc-1490b489944e","type":"Correlate","displayName":"Correlate","x":-300,"y":1100,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"457","name":"Value","syntax":"JavaScript","expressions":{"$id":"458","Literal":"Asking for workflow to analyse","JavaScript":"'getting the files list to download'"}}],"propertyStorageProviders":{"$id":"459"}},{"$id":"460","activityId":"00746b0c-d71a-451f-94d5-0d29bb75b0e4","type":"WriteHttpResponse","displayName":"HTTP Response - JSON of files","x":440,"y":1460,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"461","name":"Content","syntax":"JavaScript","expressions":{"$id":"462","JavaScript":"getVariable(\"FilesArray\")"}},{"$id":"463","name":"ContentType","expressions":{"$id":"464","Literal":"application/json"}},{"$id":"465","name":"StatusCode","expressions":{"$id":"466","Literal":"OK"}},{"$id":"467","name":"CharSet","expressions":{"$id":"468","Literal":"utf-8"}},{"$id":"469","name":"ResponseHeaders","expressions":{"$id":"470"}}],"propertyStorageProviders":{"$id":"471"}},{"$id":"472","activityId":"1d5ff88c-b6b7-491d-8db7-3ab947d232f4","type":"Correlate","displayName":"Correlate","x":380,"y":1340,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"473","name":"Value","syntax":"JavaScript","expressions":{"$id":"474","Literal":"Asking for workflow to analyse","JavaScript":"'sending files'"}}],"propertyStorageProviders":{"$id":"475"}},{"$id":"476","activityId":"a8623d93-a5ad-444c-ab01-5d03ebc2c996","type":"ObjectInstanceList","name":"ListSettings","displayName":"List Settings","x":-220,"y":140,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"477","name":"ObjectType","syntax":"Literal","expressions":{"$id":"478","Literal":"Settings"}},{"$id":"479","name":"Filter","expressions":{"$id":"480"}},{"$id":"481","name":"Skip","expressions":{"$id":"482"}},{"$id":"483","name":"Limit","expressions":{"$id":"484"}},{"$id":"485","name":"OrderBy","expressions":{"$id":"486"}},{"$id":"487","name":"Expand","expressions":{"$id":"488"}}],"propertyStorageProviders":{"$id":"489"}},{"$id":"490","activityId":"82cf3a85-e3f4-4cf4-a79f-eb4af41cb24e","type":"SetVariable","displayName":"Set Action","x":60,"y":20,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"491","name":"VariableName","expressions":{"$id":"492","Literal":"Action"}},{"$id":"493","name":"Value","syntax":"JavaScript","expressions":{"$id":"494","JavaScript":"return activities.httpStart.Output().QueryString.action"}}],"propertyStorageProviders":{"$id":"495"}},{"$id":"496","activityId":"7fa46de4-6856-4d45-bc08-aaad7e3f9a13","type":"RunJavaScript","displayName":"set up variables from settings","x":140,"y":160,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"497","name":"Script","syntax":"Literal","expressions":{"$id":"498","Literal":"function getValueByTitle(jsonData, key) {\r\n   \r\n    for (let item of jsonData) {\r\n        if (item.Key === key) {\r\n            return item.Data1;\r\n        }\r\n    }\r\n\r\n    return null; // Or handle \"key not found\" as needed\r\n}\r\n\r\nsetVariable(\"WFDocumentorSystemPromptAnalysis\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorSystemPromptAnalysis\"));\r\nsetVariable(\"WFDocumentorSystemPromptMermaid\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorSystemPromptMermaid\"));\r\nsetVariable(\"WFDocumentorStyle\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorStyle\"));\r\nsetVariable(\"WFDocumentorOutputLocation\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorOutputLocation\"));\r\nsetVariable(\"WFDocumentorPreMermaidHeader\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorPreMermaidHeader\"));\r\nsetVariable(\"WFDocumentorHost\", getValueByTitle(activities.ListSettings.Output(),\"WFDocumentorHost\"));\r\n"}},{"$id":"499","name":"PossibleOutcomes","expressions":{"$id":"500"}}],"propertyStorageProviders":{"$id":"501"}},{"$id":"502","activityId":"c294e34c-446c-4de2-b425-e08046ec8bdc","type":"SetVariable","displayName":"Set Workflows","x":1200,"y":240,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"503","name":"VariableName","expressions":{"$id":"504","Literal":"Workflows"}},{"$id":"505","name":"Value","syntax":"JavaScript","expressions":{"$id":"506","JavaScript":"activities.requestWorkflowNames.ResponseContent()"}}],"propertyStorageProviders":{"$id":"507"}},{"$id":"508","activityId":"fb93cbee-c185-4d71-baf0-35e185906d89","type":"Correlate","displayName":"Correlate","x":1560,"y":280,"persistWorkflow":false,"loadWorkflowContext":false,"saveWorkflowContext":false,"properties":[{"$id":"509","name":"Value","expressions":{"$id":"510","Literal":"Asking for workflow to analyse"}}],"propertyStorageProviders":{"$id":"511"}}],"connections":[{"$id":"512","sourceActivityId":"b6d9495a-628a-4537-89a1-f8be3e1e6b1e","targetActivityId":"c294e34c-446c-4de2-b425-e08046ec8bdc","outcome":"Done"},{"$id":"513","sourceActivityId":"06284dda-4d6b-41a2-9c0f-1cffb98c0cf4","targetActivityId":"9daa4f8d-9f9d-4eea-919c-712d467796ac","outcome":"Done"},{"$id":"514","sourceActivityId":"be73046d-b46f-4178-8358-872327bb6dd6","targetActivityId":"8106bfed-883d-4cd0-8be1-7ce23604b5ef","outcome":"Done"},{"$id":"515","sourceActivityId":"d4c93f8b-cfc1-495d-ae50-b9b220458f05","targetActivityId":"c8bba6e5-db7e-44b2-97da-af68dab0ec9d","outcome":"Done"},{"$id":"516","sourceActivityId":"b69a2cc5-a564-468d-a57b-3305ca53d351","targetActivityId":"1e377f2b-70bb-43c9-988f-5ac295561458","outcome":"Done"},{"$id":"517","sourceActivityId":"fd4a1d95-faf1-4804-854f-77fda8d0e1a0","targetActivityId":"31ec35cc-0f5c-4276-83f0-4693383d90c3","outcome":"Done"},{"$id":"518","sourceActivityId":"c294e34c-446c-4de2-b425-e08046ec8bdc","targetActivityId":"fb93cbee-c185-4d71-baf0-35e185906d89","outcome":"Done"},{"$id":"519","sourceActivityId":"56456f47-07cf-4d30-b47d-fdfdecf6beb7","targetActivityId":"b6d9495a-628a-4537-89a1-f8be3e1e6b1e","outcome":"Done"},{"$id":"520","sourceActivityId":"9daa4f8d-9f9d-4eea-919c-712d467796ac","targetActivityId":"aa77f203-8104-47a3-bf25-e8feefdfd789","outcome":"Done"},{"$id":"521","sourceActivityId":"8106bfed-883d-4cd0-8be1-7ce23604b5ef","targetActivityId":"ca12c61b-dbae-4c4b-8d8e-75a5488e7871","outcome":"Done"},{"$id":"522","sourceActivityId":"ca12c61b-dbae-4c4b-8d8e-75a5488e7871","targetActivityId":"b69a2cc5-a564-468d-a57b-3305ca53d351","outcome":"Done"},{"$id":"523","sourceActivityId":"abc2e673-b323-44ad-97d1-812ffabbd3bb","targetActivityId":"5d772cc9-9711-4da2-a3ea-dc2187cb87db","outcome":"Success"},{"$id":"524","sourceActivityId":"5d772cc9-9711-4da2-a3ea-dc2187cb87db","targetActivityId":"d4c93f8b-cfc1-495d-ae50-b9b220458f05","outcome":"Done"},{"$id":"525","sourceActivityId":"b1d9097a-a348-41f1-be0e-993c9cd6121e","targetActivityId":"69d4edfe-1407-4177-bd43-e19a76f27e5a","outcome":"Done"},{"$id":"526","sourceActivityId":"69d4edfe-1407-4177-bd43-e19a76f27e5a","targetActivityId":"4822e0f9-c111-4b36-812b-6a24c3bf361b","outcome":"Done"},{"$id":"527","sourceActivityId":"4822e0f9-c111-4b36-812b-6a24c3bf361b","targetActivityId":"be73046d-b46f-4178-8358-872327bb6dd6","outcome":"Done"},{"$id":"528","sourceActivityId":"53e6fe4b-b971-40e9-91ac-738a4c166d43","targetActivityId":"f3bffd6d-e15e-4d8a-8647-1a0f2eb47251","outcome":"Done"},{"$id":"529","sourceActivityId":"0e550196-5288-4a72-9f76-70dc529474dd","targetActivityId":"53e6fe4b-b971-40e9-91ac-738a4c166d43","outcome":"Done"},{"$id":"530","sourceActivityId":"5ff4b4da-5a07-4dda-9c72-61b414e0f055","targetActivityId":"82cf3a85-e3f4-4cf4-a79f-eb4af41cb24e","outcome":"Done"},{"$id":"531","sourceActivityId":"fb93cbee-c185-4d71-baf0-35e185906d89","targetActivityId":"31e3ada8-bde9-486e-b907-58916a61bcb4","outcome":"Done"},{"$id":"532","sourceActivityId":"31e3ada8-bde9-486e-b907-58916a61bcb4","targetActivityId":"1c7a0faf-e314-496a-8dc7-74d28663e3b8","outcome":"True"},{"$id":"533","sourceActivityId":"31e3ada8-bde9-486e-b907-58916a61bcb4","targetActivityId":"844942cd-23ec-4d55-98f2-40972ac88a2f","outcome":"False"},{"$id":"534","sourceActivityId":"f3bffd6d-e15e-4d8a-8647-1a0f2eb47251","targetActivityId":"2b31cbd5-2e27-489b-b118-69a653abbcc9","outcome":"Done"},{"$id":"535","sourceActivityId":"2b31cbd5-2e27-489b-b118-69a653abbcc9","targetActivityId":"5cfc9801-697c-4caa-b424-d254eec781a6","outcome":"Done"},{"$id":"536","sourceActivityId":"a479c1de-2743-4a09-bb46-3d1615235054","targetActivityId":"0a083b46-c7fb-4303-a4dc-11d40482f33a","outcome":"Done"},{"$id":"537","sourceActivityId":"db3eb830-6cfd-4f65-a185-605a2622bef3","targetActivityId":"000265f3-061d-4ed4-98f4-1f3ce7bba8e2","outcome":"Success"},{"$id":"538","sourceActivityId":"1e377f2b-70bb-43c9-988f-5ac295561458","targetActivityId":"b7a53ec0-e39e-4023-84d6-f770c2edf53c","outcome":"Done"},{"$id":"539","sourceActivityId":"b7a53ec0-e39e-4023-84d6-f770c2edf53c","targetActivityId":"db3eb830-6cfd-4f65-a185-605a2622bef3","outcome":"True"},{"$id":"540","sourceActivityId":"b7a53ec0-e39e-4023-84d6-f770c2edf53c","targetActivityId":"abc2e673-b323-44ad-97d1-812ffabbd3bb","outcome":"Done"},{"$id":"541","sourceActivityId":"c8bba6e5-db7e-44b2-97da-af68dab0ec9d","targetActivityId":"a17d4a91-f658-46c9-a5e7-24eab1b54f95","outcome":"Done"},{"$id":"542","sourceActivityId":"a17d4a91-f658-46c9-a5e7-24eab1b54f95","targetActivityId":"e1e990bd-001d-47b2-9c4d-bb241be4a000","outcome":"True"},{"$id":"543","sourceActivityId":"a17d4a91-f658-46c9-a5e7-24eab1b54f95","targetActivityId":"fd4a1d95-faf1-4804-854f-77fda8d0e1a0","outcome":"False"},{"$id":"544","sourceActivityId":"e1e990bd-001d-47b2-9c4d-bb241be4a000","targetActivityId":"3943e395-0499-4a8b-889a-633ce4190579","outcome":"Success"},{"$id":"545","sourceActivityId":"5cfc9801-697c-4caa-b424-d254eec781a6","targetActivityId":"22d10739-23ab-4dc1-b520-be02d425f0e2","outcome":"Done"},{"$id":"546","sourceActivityId":"5cfc9801-697c-4caa-b424-d254eec781a6","targetActivityId":"a479c1de-2743-4a09-bb46-3d1615235054","outcome":"Iterate"},{"$id":"547","sourceActivityId":"b20adcfd-a72f-49df-9269-9f5a11f11978","targetActivityId":"3fa4a422-3968-49d6-871a-28688ca98000","outcome":"Iterate"},{"$id":"548","sourceActivityId":"3fa4a422-3968-49d6-871a-28688ca98000","targetActivityId":"519506f6-fa79-4e85-8f3d-d01fda1c18f4","outcome":"Done"},{"$id":"549","sourceActivityId":"519506f6-fa79-4e85-8f3d-d01fda1c18f4","targetActivityId":"676ce85b-f806-4caf-8c87-13574bc7e203","outcome":"Done"},{"$id":"550","sourceActivityId":"22d10739-23ab-4dc1-b520-be02d425f0e2","targetActivityId":"b11cab73-f73c-4cd6-852b-7b4373b4ba56","outcome":"Done"},{"$id":"551","sourceActivityId":"b11cab73-f73c-4cd6-852b-7b4373b4ba56","targetActivityId":"b20adcfd-a72f-49df-9269-9f5a11f11978","outcome":"Done"},{"$id":"552","sourceActivityId":"676ce85b-f806-4caf-8c87-13574bc7e203","targetActivityId":"54e8fbce-7eb6-449e-8fea-75afeeee07b7","outcome":"Success"},{"$id":"553","sourceActivityId":"0a083b46-c7fb-4303-a4dc-11d40482f33a","targetActivityId":"b1d9097a-a348-41f1-be0e-993c9cd6121e","outcome":"Done"},{"$id":"554","sourceActivityId":"aa77f203-8104-47a3-bf25-e8feefdfd789","targetActivityId":"2b38e2ca-3a2e-42f0-ac21-dcd87fd8b669","outcome":"Done"},{"$id":"555","sourceActivityId":"2b38e2ca-3a2e-42f0-ac21-dcd87fd8b669","targetActivityId":"b1d9097a-a348-41f1-be0e-993c9cd6121e","outcome":"Done"},{"$id":"556","sourceActivityId":"000265f3-061d-4ed4-98f4-1f3ce7bba8e2","targetActivityId":"77ab6068-8b51-43a7-914e-6bb1567ec35a","outcome":"Done"},{"$id":"557","sourceActivityId":"a0bad298-4fa7-41ea-abfc-0263d27e5250","targetActivityId":"ee179ec8-b05e-40d0-b1ec-03094494fb65","outcome":"True"},{"$id":"558","sourceActivityId":"3943e395-0499-4a8b-889a-633ce4190579","targetActivityId":"a0bad298-4fa7-41ea-abfc-0263d27e5250","outcome":"Done"},{"$id":"559","sourceActivityId":"c06a8d83-9f57-4e45-9b85-575b92101b2b","targetActivityId":"6f315c7f-8c42-4b96-a9cc-1490b489944e","outcome":"Done"},{"$id":"560","sourceActivityId":"6f315c7f-8c42-4b96-a9cc-1490b489944e","targetActivityId":"22d10739-23ab-4dc1-b520-be02d425f0e2","outcome":"Done"},{"$id":"561","sourceActivityId":"b20adcfd-a72f-49df-9269-9f5a11f11978","targetActivityId":"1d5ff88c-b6b7-491d-8db7-3ab947d232f4","outcome":"Done"},{"$id":"562","sourceActivityId":"1d5ff88c-b6b7-491d-8db7-3ab947d232f4","targetActivityId":"00746b0c-d71a-451f-94d5-0d29bb75b0e4","outcome":"Done"},{"$id":"563","sourceActivityId":"82cf3a85-e3f4-4cf4-a79f-eb4af41cb24e","targetActivityId":"a8623d93-a5ad-444c-ab01-5d03ebc2c996","outcome":"Done"},{"$id":"564","sourceActivityId":"7fa46de4-6856-4d45-bc08-aaad7e3f9a13","targetActivityId":"56456f47-07cf-4d30-b47d-fdfdecf6beb7","outcome":"Done"},{"$id":"565","sourceActivityId":"a8623d93-a5ad-444c-ab01-5d03ebc2c996","targetActivityId":"7fa46de4-6856-4d45-bc08-aaad7e3f9a13","outcome":"Done"}],"id":"05260d2547cd4bffb16b46fb623bff44"}