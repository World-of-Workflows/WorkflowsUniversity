<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(13)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(12) > ul > li:nth-child(13) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(12) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(12) > ul > li:nth-child(13) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(12) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(12) > ul.nav-list > li.nav-list-item:nth-child(13) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Examples | Workflows University</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Examples" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="World of Workflows Information" /> <meta property="og:description" content="World of Workflows Information" /> <link rel="canonical" href="http://localhost:4000/docs/userguide/examples.html" /> <meta property="og:url" content="http://localhost:4000/docs/userguide/examples.html" /> <meta property="og:site_name" content="Workflows University" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Examples" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"World of Workflows Information","headline":"Examples","url":"http://localhost:4000/docs/userguide/examples.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Workflows University </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/docs/release-notes-1-7.html" class="nav-list-link">Release notes 1.7</a></li><li class="nav-list-item"><a href="/docs/installation.html" class="nav-list-link">Installation</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Tasks category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/tasks/README.html" class="nav-list-link">Tasks</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/tasks/all-tasks.html" class="nav-list-link">All Tasks</a></li><li class="nav-list-item"><a href="/docs/tasks/opening-the-task-pane.html" class="nav-list-link">Opening the Task Pane</a></li><li class="nav-list-item"><a href="/docs/tasks/pick-a-task.html" class="nav-list-link">Pick a Task</a></li><li class="nav-list-item"><a href="/docs/tasks/working-with-a-task.html" class="nav-list-link">Working with a Task</a></li></ul></li><li class="nav-list-item"><a href="/docs/data/README.html" class="nav-list-link">Working with Data</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Activities category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/activity-guide.html" class="nav-list-link">Activities</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Compensation category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/activities/compensation.html" class="nav-list-link">Compensation</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/activities/compensation-compensable.html" class="nav-list-link">Compensable</a> </li><li class="nav-list-item"> <a href="/docs/activities/compensation-compensate.html" class="nav-list-link">Compensate</a> </li><li class="nav-list-item"> <a href="/docs/activities/compensation-confirm.html" class="nav-list-link">Confirm</a> </li></ul></li><li class="nav-list-item"><a href="/docs/activities/random-number.html" class="nav-list-link">Random Number</a></li><li class="nav-list-item"><a href="/docs/activities/read-line.html" class="nav-list-link">Read Line</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Workflow Development category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/workflow-development/README.html" class="nav-list-link">Workflow Development</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/workflow-development/creating-a-workflow.html" class="nav-list-link">Creating a Workflow</a></li><li class="nav-list-item"><a href="/docs/workflow-development/dual-triggers.html" class="nav-list-link">Dual Triggers</a></li><li class="nav-list-item"><a href="/docs/workflow-development/editing-a-workflow.html" class="nav-list-link">Editing a Workflow</a></li><li class="nav-list-item"><a href="/docs/object-workflows.html" class="nav-list-link">Object Workflows</a></li><li class="nav-list-item"><a href="/docs/workflow-development/starting-workflows.html" class="nav-list-link">Starting Workflows</a></li><li class="nav-list-item"><a href="/docs/workflow-development/working-with-tasks.html" class="nav-list-link">Working with Tasks</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Liquid Reference category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/liquid/README.html" class="nav-list-link">Liquid Reference</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/liquid/introduction.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="/docs/liquid/operators.html" class="nav-list-link">Operators</a></li><li class="nav-list-item"><a href="/docs/liquid/filters.html" class="nav-list-link">Filters</a></li><li class="nav-list-item"><a href="/docs/liquid/truthy-amd-falsy.html" class="nav-list-link">Truthy and Falsy</a></li><li class="nav-list-item"><a href="/docs/liquid/types.html" class="nav-list-link">Types</a></li><li class="nav-list-item"><a href="/docs/liquid/expressions-in-workflows.html" class="nav-list-link">Use in World of Workflows</a></li><li class="nav-list-item"><a href="/docs/liquid/whitespace-control.html" class="nav-list-link">Whitespace Control</a></li><li class="nav-list-item"><a href="/docs/liquid/iteration.html" class="nav-list-link">Iteration</a></li><li class="nav-list-item"><a href="/docs/liquid/control-flow.html" class="nav-list-link">Conmtrol Flow</a></li><li class="nav-list-item"><a href="/docs/liquid/template.html" class="nav-list-link">Template</a></li><li class="nav-list-item"><a href="/docs/liquid/variable.html" class="nav-list-link">Variable</a></li></ul></li><li class="nav-list-item"><a href="/docs/jotform-integration.html" class="nav-list-link">JotForm Integration</a></li><li class="nav-list-item"><a href="/docs/reporting/README.html" class="nav-list-link">Reporting</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Solutions category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/solutions/README.html" class="nav-list-link">Solutions</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/solutions/AIProspector/README.html" class="nav-list-link">AI Prospector</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in User Guide category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/userguide/ug.html" class="nav-list-link">User Guide</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/userguide/introduction.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="/docs/userguide/database.html" class="nav-list-link">Database</a></li><li class="nav-list-item"><a href="/docs/userguide/views.html" class="nav-list-link">Views</a></li><li class="nav-list-item"><a href="/docs/userguide/tasks.html" class="nav-list-link">Tasks</a></li><li class="nav-list-item"><a href="/docs/userguide/reporting.html" class="nav-list-link">Reporting</a></li><li class="nav-list-item"><a href="/docs/userguide/building-workflows.html" class="nav-list-link">Building Workflows</a></li><li class="nav-list-item"><a href="/docs/userguide/workflow-details.html" class="nav-list-link">Workflow Details</a></li><li class="nav-list-item"><a href="/docs/userguide/data-activities.html" class="nav-list-link">Data Activities</a></li><li class="nav-list-item"><a href="/docs/userguide/timer-activities.html" class="nav-list-link">Timer Activities</a></li><li class="nav-list-item"><a href="/docs/userguide/documentation.html" class="nav-list-link">Documentation</a></li><li class="nav-list-item"><a href="/docs/userguide/plugins.html" class="nav-list-link">Plugin Development</a></li><li class="nav-list-item"><a href="/docs/userguide/solutions.html" class="nav-list-link">Solutions</a></li><li class="nav-list-item"><a href="/docs/userguide/examples.html" class="nav-list-link">Examples</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Reference category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/userguide/reference.html" class="nav-list-link">Reference</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/userguide/reference-datatypes.html" class="nav-list-link">DataTypes</a> </li><li class="nav-list-item"> <a href="/docs/userguide/reference-activities.html" class="nav-list-link">Activities</a> </li><li class="nav-list-item"> <a href="/docs/userguide/reference-odata.html" class="nav-list-link">OData Filters</a> </li><li class="nav-list-item"> <a href="/docs/userguide/reference-liquid.html" class="nav-list-link">Liquid</a> </li></ul></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Workflows University" aria-label="Search Workflows University" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/world-of-workflows/WorkflowsUniversity" class="site-button" > Template Repository </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/userguide/ug.html">User Guide</a></li> <li class="breadcrumb-nav-list-item"><span>Examples</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="examples"> <a href="#examples" class="anchor-heading" aria-labelledby="examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Examples </h1> <p>This section contains packaged examples of how to solve certain business problems. These are meant to be taken, modified and used by you to solve your own business problems.</p> <h2 id="designing-long-running-workflows"> <a href="#designing-long-running-workflows" class="anchor-heading" aria-labelledby="designing-long-running-workflows"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Designing long-running workflows </h2> <p>As you develop your workflows, you will have workflows in production which you need to change. It is easy to make these changes and they will apply to all future instances of your workflows. However, if you have a workflow that started before your change was made and has not yet completed, Workd Of Workflows will execute your old workflow.</p> <p>This diagram describes this scenario:</p> <p>The workflow engine will continue to run your workflows as they were designed until they complete. This maintains the integrity of your design, and you can be confident that the workflow will continue to run the way you design it, even if changes are subsequently made to that workflow.</p> <p>This can become a problem if you expect your workflows to run for an extended period of time.</p> <p>For example, your company has a process that manages your employee HR process - from recruitment, onboarding, pay rises and eventual termination of employment.</p> <p>You could write this as a single workflow, and each time an employee starts with the company a new instance of the workflow would be created. The effect of this is that you would have one instance for Jane Smith’s employment, a second instance for John Doe’s employment and so forth.</p> <p>You would expect that your employment process would change during the period of a specific employee’s employment. However, the instances that are still running will not inherit any design changes you make to the workflow. We hope and expect that employees will be with us for many years, and change to the workflow during this time is inevitable.</p> <p>So, how do we manage this?</p> <p>Firstly, break up your workflows into manageable pieces. Design your workflows so that each one can be completed in a ‘reasonable’ period of time. This might be a day, a week or month, depending on the workflow and the likelihood of change.</p> <p>Here is an example of one way to break up this sample workflow.</p> <p>Each workflow could call the next. For example, changes made to the Pay Rise workflow would now apply to an employee currently being processed by the Onboarding workflow.</p> <h4 id="what-if-you-have-a-complex-workflow-and-breaking-it-into-small-flows-does-not-suit"> <a href="#what-if-you-have-a-complex-workflow-and-breaking-it-into-small-flows-does-not-suit" class="anchor-heading" aria-labelledby="what-if-you-have-a-complex-workflow-and-breaking-it-into-small-flows-does-not-suit"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What if you have a complex workflow and breaking it into small flows does not suit? </h4> <p>A more challenging example might be a workflow to manage thousands of insurance renewals, where a complex process must run for months and there is a high likelihood of making process improvements whilst thousands of workflow instances are running.</p> <p>We can imagine breaking your workflows into smaller pieces. Part 2 could be called from Part 1. In Part 2 you may need 20 tasks, some asked in only specific scenarios.</p> <p>However, changes to Part 2 might need to impact the existing long-running workflow instances. We have developed the Overview workflow concept to manage this.</p> <h3 id="implementing-an-overview-workflow"> <a href="#implementing-an-overview-workflow" class="anchor-heading" aria-labelledby="implementing-an-overview-workflow"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Implementing an Overview workflow </h3> <p>One way to have a single workflow run for the entire process and still be able to make changes along the way is to use a simple workflow we will call an Overview workflow.</p> <p>Here is how to design this workflow.</p> <ol> <li> <p>Create a workflow, give it a suitable name, such as <em>HR Overview.</em></p> </li> <li> <p>Implement a method to start your <em>HR Overview</em> workflow (eg from a data object (see <strong>Implementing triggers<span class="smallcaps">),</span></strong> a timer (see Error! Reference source not found.) )</p> </li> <li> <p>Set up any variables you need to pass to the main workflow, such as the ObjectID of the triggering object instance</p> </li> <li> <p>Add a <em>Run workflow</em> activity to kick off your main workflow</p> </li> <li> <p>Add a <em>Run JavaScript</em> activity to grab the outcome of your main workflow</p> </li> <li> <p>(optional, and recommended for debugging) add a <em>TaskCreate</em> activity to provide you with the ability to stop your workflow</p> </li> <li> <p>Join everything up.</p> </li> </ol> <p>You will notice that there is almost nothing in this workflow that will ever need to change. All it does is to call another workflow. The simpler you make your Overview workflow, the less likelihood that it will ever need changes.</p> <p>Here are the activities in detail</p> <ol> <li> <p>The workflow is called <em>StaffOnboardingOverview</em></p> </li> <li> <p>I chose an <em>Object Instance Trigger</em> to start this workflow. It is run from within a <em>Staff</em> instance:<br /> <img src="./media/image111.png" style="width:3.28934in;height:1.56741in" /><br /> <img src="./media/image112.png" style="width:2.16027in;height:2.26486in" alt="Graphical user interface, text, application, email Description automatically generated" /></p> </li> <li> <p>Set a variable called <strong><span class="smallcaps">ObjectId</span></strong> to contain the ObjectId of the initiating Staff object:<br /> <img src="./media/image113.png" style="width:1.84772in;height:0.60589in" /><br /> <img src="./media/image114.png" style="width:2.8731in;height:1.54064in" /><br /> Note: we use JavaScript to get the value, using the <strong><span class="smallcaps">Name</span></strong> of the trigger activity to get the ObjectID, using this formula:</p> </li> </ol> <p>activities.TriggerStaff.InstanceId()</p> <ol> <li> <p>This is the <em>Run Workflow</em> activity:</p> <p><img src="./media/image115.png" style="width:3.30359in;height:1.45781in" /></p> <p>The workflow definition uses a Liquid Filter to allow us to use the name of the workflow we are calling (rather than it’s ID)</p> <p>The Input is the JSON we will be passing to our main workflow</p> <p>The branches <strong><em>Continue</em></strong> &amp; <strong><em>Cancel</em></strong> are the text entered into Possible Outcomes.<br /> <img src="./media/image116.png" style="width:3.30347in;height:2.96895in" alt="Graphical user interface, application, Teams Description automatically generated" /><br /> Note the <strong><span class="smallcaps">Name</span></strong> on the next page:<br /> <img src="./media/image117.png" style="width:2.18408in;height:1.76053in" /><br /> You will use this name in the next activity.</p> </li> <li> <p>The <em>Run JavaScript</em> activity<br /> <img src="./media/image118.png" style="width:3.08889in;height:2.51875in" /></p> </li> </ol> <blockquote> <p>Note how the name of the <em>Run Workflow</em> activity is used in the <em>Run JavaScript</em>.</p> </blockquote> <p>var parameters = JSON.parse(activities.runDetailWorkflow.Output().workflowOutput)</p> <p>for(const property in parameters)</p> <p>{</p> <p>    setVariable(property.toString(),parameters[property]);</p> <p>}</p> <ol> <li> <p>(Optional) Create a Task to allow you to stop the Overview workflow at will. Note the branches<br /> <img src="./media/image119.png" style="width:2.63717in;height:1.78285in" /><br /> …<br /> <img src="./media/image120.png" style="width:2.73406in;height:0.93659in" /></p> </li> <li> <p>Add a Finish activity and connect the activities like this:<br /> <img src="./media/image121.png" style="width:5.41148in;height:5.94807in" alt="The finished workflow" /></p> </li> </ol> <h3 id="implementing-the-main-workflow"> <a href="#implementing-the-main-workflow" class="anchor-heading" aria-labelledby="implementing-the-main-workflow"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Implementing the main workflow </h3> <p>The main workflow can now be designed to be called as many times as needed to ensure that it does not run for too long.</p> <h6 id="accept-parameters-from-the-overview-workflow"> <a href="#accept-parameters-from-the-overview-workflow" class="anchor-heading" aria-labelledby="accept-parameters-from-the-overview-workflow"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Accept parameters from the Overview workflow </h6> <p>Create this as the first activity in your main workflow:</p> <p><img src="./media/image122.png" style="width:2.47871in;height:0.85068in" /></p> <p>Use this JavaScript to take the JSON passed from the Overview workflow and convert it to dot-notation variables.</p> <p>var parameters = JSON.parse(input)</p> <p>setVariable(“Parameters”,parameters)</p> <p>If the JSON passed in is</p> <p>{</p> <p>“ObjectId”:123</p> <p>}</p> <p>This allows you to reference the passed in ObjectId in Liquid as</p> <p>And in JavaScript as</p> <p>getVariable(“Parameters”).ObjectId</p> <h6 id="use-status-fields-as-starting-points-of-your-main-workflow"> <a href="#use-status-fields-as-starting-points-of-your-main-workflow" class="anchor-heading" aria-labelledby="use-status-fields-as-starting-points-of-your-main-workflow"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use Status fields as starting points of your main workflow </h6> <p>Use a Switch to direct the flow, using data saved in your object to determine where the flow is up to. For example:</p> <p><img src="./media/image123.png" style="width:2.87012in;height:1.02393in" /></p> <p><img src="./media/image124.png" style="width:5.6151in;height:4.43932in" /></p> <p>In this switch statement you first want to match the last checkpoint in your workflow then the next-to-last checkpoint, and so on.</p> <p><img src="./media/image125.png" style="width:6.40685in;height:2.94434in" /></p> <h6 id="return-to-the-overview-workflow-frequently"> <a href="#return-to-the-overview-workflow-frequently" class="anchor-heading" aria-labelledby="return-to-the-overview-workflow-frequently"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Return to the Overview workflow frequently </h6> <p>This is the Finish activity.</p> <p><img src="./media/image126.png" style="width:3.28854in;height:2.78939in" /></p> <p>It passes back the ObjectId so that the Overview workflow can use it to call the main workflow again. It also passes back the ‘Continue’ Outcome, which is used to determine whether to run the main workflow again. (If we pass back ‘Cancel’, the Overview workflow will stop).</p> <p>Notice that the main workflow does the minimum amount of processing between the switch statement and the finish statement, ideally just enough to prepare and process one <em>Task Create</em> activity. This is where the magic occurs: now the main workflow only has to be in existence for one task at a time. As soon as this task is complete, a new instance of the main workflow is created, and continued from this checkpoint.</p> <h6 id="ensure-variables-are-available"> <a href="#ensure-variables-are-available" class="anchor-heading" aria-labelledby="ensure-variables-are-available"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ensure variables are available </h6> <p>Note that you will need to ensure the variables you set in your main workflow are available when the workflow is restarted. This can be done by calling a ‘set variables’ workflow, or specifically in the main workflow.</p> <p>Example of a ‘set variables’ workflow:</p> <p><img src="./media/image127.png" style="width:4.55804in;height:4.54844in" /></p> <p>We pass in a suitable ObjectID that we are always going to know.</p> <p>Note that <em>Mode</em> is <strong><span class="smallcaps">Blocking</span></strong>, waiting for the <em>SetupVariables</em> workflow to complete.</p> <p>The first activity in the <em>SetupVariables</em> workflow is to get the database object using the passed in ObjectId. For example:<br /> <img src="./media/image128.png" style="width:3.28315in;height:2.28467in" /></p> <p>The rest of the variables are then set up</p> <p>The last 2 activities in the SetupVariables workflow are to set up send back the variables to the calling workflow</p> <p><img src="./media/image129.png" style="width:2.36636in;height:1.71121in" alt="A picture containing timeline Description automatically generated" /></p> <p><img src="./media/image130.png" style="width:4.92062in;height:4.26643in" /></p> <p><img src="./media/image131.png" style="width:3.99372in;height:2.30552in" /></p> <p>Another method of setting variables in the main workflow is to build up the variables from the known data. For example, in this case, if the Staff already has a SalaryPackage we can get the SalaryPackage object from the Staff object. Otherwise we can create the SalaryPackage object and save the relationship back to the Staff object</p> <p><img src="./media/image132.png" style="width:6.26806in;height:2.83542in" /></p> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2023-2024 World of Workflows.</p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/just-the-docs/just-the-docs/tree/main/docs/userguide/examples.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script type="module"> import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.esm.min.mjs'; var config = {} ; mermaid.initialize(config); mermaid.run({ querySelector: '.language-mermaid', }); </script> </body> </html>
